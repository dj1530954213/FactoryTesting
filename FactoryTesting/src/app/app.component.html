<nz-layout class="app-layout">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <nz-header class="app-header">
    <div class="nav-brand">
      <nz-space nzAlign="center">
        <span *nzSpaceItem class="brand-icon">ğŸ­</span>
        <span *nzSpaceItem class="brand-text">å·¥å‚æµ‹è¯•ç³»ç»Ÿ</span>
        <nz-tag *nzSpaceItem nzColor="blue">v1.0.0</nz-tag>
      </nz-space>
    </div>
    
    <ul nz-menu nzMode="horizontal" nzTheme="dark" class="nav-menu">
      <li nz-menu-item routerLink="/dashboard" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="dashboard" nzTheme="outline"></span>
        ä»ªè¡¨æ¿
      </li>
      <li nz-menu-item routerLink="/data-import" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="import" nzTheme="outline"></span>
        æ•°æ®å¯¼å…¥
      </li>
      <li nz-menu-item routerLink="/test-execution" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="experiment" nzTheme="outline"></span>
        æµ‹è¯•æ‰§è¡Œ
      </li>
      <li nz-menu-item routerLink="/batch-management" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="container" nzTheme="outline"></span>
        æ‰¹æ¬¡ç®¡ç†
      </li>
      <li nz-menu-item routerLink="/manual-test" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="tool" nzTheme="outline"></span>
        æ‰‹åŠ¨æµ‹è¯•
      </li>
      <li nz-menu-item routerLink="/report-generation" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="file" nzTheme="outline"></span>
        æŠ¥å‘Šç”Ÿæˆ
      </li>
      <li nz-menu-item routerLink="/system-monitor" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="monitor" nzTheme="outline"></span>
        ç³»ç»Ÿç›‘æ§
      </li>
      <li nz-menu-item routerLink="/settings" routerLinkActive="ant-menu-item-selected">
        <span nz-icon nzType="setting" nzTheme="outline"></span>
        è®¾ç½®
      </li>
    </ul>
    
    <div class="nav-status">
      <nz-space nzAlign="center">
        <div *nzSpaceItem class="status-item">
          <span class="status-label">ç³»ç»Ÿå¥åº·:</span>
          <nz-tag [nzColor]="systemStatus?.system_health === 'healthy' ? 'green' : 'red'">
            {{ systemStatus?.system_health || 'unknown' }}
          </nz-tag>
        </div>
        <div *nzSpaceItem class="status-item">
          <span class="status-label">ç‰ˆæœ¬:</span>
          <nz-tag nzColor="blue">{{ systemStatus?.version || '0.1.0' }}</nz-tag>
        </div>
        <nz-badge *nzSpaceItem 
                  [nzStatus]="isConnected ? 'success' : 'error'" 
                  [nzText]="isConnected ? 'å·²è¿æ¥' : 'æœªè¿æ¥'">
        </nz-badge>
      </nz-space>
    </div>
  </nz-header>

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <nz-content class="app-content">
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </nz-content>

  <!-- åº•éƒ¨çŠ¶æ€æ  -->
  <nz-footer class="app-footer">
    <div class="footer-content">
      <div class="status-left">
        <nz-space nzAlign="center">
          <nz-badge *nzSpaceItem 
                    [nzStatus]="isConnected ? 'success' : 'error'" 
                    [nzText]="isConnected ? 'ç³»ç»Ÿå·²è¿æ¥' : 'ç³»ç»Ÿæœªè¿æ¥'">
          </nz-badge>
        </nz-space>
      </div>
      
      <div class="status-center">
        <nz-space nzAlign="center">
          <span *nzSpaceItem>æ´»åŠ¨ä»»åŠ¡: {{ systemStatus?.active_test_tasks || 0 }}</span>
          <nz-divider *nzSpaceItem nzType="vertical"></nz-divider>
          <span *nzSpaceItem>æœ€åæ›´æ–°: {{ lastUpdateTime | date:'HH:mm:ss' }}</span>
        </nz-space>
      </div>
      
      <div class="status-right">
        <span>å·¥å‚æµ‹è¯•ç³»ç»Ÿ v{{ systemStatus?.version || '1.0.0' }}</span>
      </div>
    </div>
  </nz-footer>
</nz-layout>
